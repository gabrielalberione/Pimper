/*! angular-pinch-zoom - v0.1.0 */
angular.module("ngPinchZoom",[]).directive("ngPinchZoom",function(){function t(t,n,e){function c(t){k=t.touches[0].clientX,M=t.touches[0].clientY,Y=w,d=X,S=0,x=0}function o(t){""===h&&(1===t.touches.length&&p>1?h="swipe":2===t.touches.length&&(h="pinch",m=p,f=s(t),b=t.touches[0].clientX-parseInt((t.touches[0].clientX-t.touches[1].clientX)/2,10)-n[0].offsetLeft-Y,I=t.touches[0].clientY-parseInt((t.touches[0].clientY-t.touches[1].clientY)/2,10)-n[0].offsetTop-d)),"swipe"===h?(t.preventDefault(),S=t.touches[0].clientX-k,x=t.touches[0].clientY-M,w=Y+S,X=d+x,r()):"pinch"===h&&(t.preventDefault(),l=s(t),g=l/f,p=g*m,w=b*(1-g)+Y+S,X=I*(1-g)+d+x,r())}function i(t){""===h||t.touches.length>0||(1>p?(p=1,w=0,X=0):p>v?(p=v,g=p/m,w=b*(1-g)+Y+S,X=I*(1-g)+d+x):(w>0?w=0:u*(1-p)>w&&(w=u*(1-p)),X>0?X=0:a*(1-p)>X&&(X=a*(1-p))),r(.1),h="")}function s(t){var n=Math.sqrt(Math.pow(t.touches[0].clientX-t.touches[1].clientX,2)+Math.pow(t.touches[0].clientY-t.touches[1].clientY,2));return parseInt(n,10)}function r(t){var e=t?"all cubic-bezier(0,0,.5,1) "+t+"s":"",c=[p,0,0,p,w,X],o="matrix("+c.join(",")+")";n.css({"-webkit-transition":e,transition:e,"-webkit-transform":o+" translate3d(0,0,0)",transform:o})}var u,a,h="",l=0,f=0,p=1,g=1,m=1,v=parseInt(e.maxScale,10);(isNaN(v)||1>=v)&&(v=3);var w=0,X=0,Y=0,d=0,b=0,I=0,k=0,M=0,S=0,x=0,D=new Image;D.onload=function(){u=n[0].clientWidth,a=n[0].clientHeight,n.css({"-webkit-transform-origin":"0 0","transform-origin":"0 0"}),n.on("touchstart",c),n.on("touchmove",o),n.on("touchend",i)},e.ngSrc?D.src=e.ngSrc:D.src=e.src}var n={restrict:"A",scope:!1,link:t};return n});